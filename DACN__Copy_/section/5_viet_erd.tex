\subsubsection{Thiết kế Cơ sở dữ liệu}

Mô hình Quan hệ Thực thể (ERD) chi tiết của hệ thống được trình bày tại \hyperref[appendix:erd]{Phụ lục A}. Thiết kế này đảm bảo tính toàn vẹn dữ liệu và khả năng mở rộng cho các nghiệp vụ giám sát nông nghiệp thông minh.

Hệ thống cơ sở dữ liệu được tổ chức thành các phân hệ chính như sau:

\paragraph{Phân hệ Quản lý Nông trại:}
Đây là nhóm thực thể trung tâm, bao gồm bảng \texttt{farms} (lưu thông tin nông trại) liên kết 1-nhiều với \texttt{plants} (cây trồng) và \texttt{crops} (mùa vụ). Cấu trúc này cho phép quản lý chi tiết quy trình canh tác từ lúc xuống giống đến khi thu hoạch, bao gồm cả việc theo dõi sức khỏe cây trồng qua bảng \texttt{plant\_health\_statuses}.

\paragraph{Phân hệ IoT và Thu thập dữ liệu:}
Các thiết bị phần cứng được quản lý qua bảng \texttt{devices} và \texttt{sensors}. Dữ liệu quan trọng nhất của hệ thống là \texttt{telemetries}, nơi lưu trữ hàng triệu bản ghi dữ liệu cảm biến (nhiệt độ, độ ẩm, ánh sáng) được gửi về liên tục. Quan hệ giữa \texttt{devices} và \texttt{farms} giúp xác định thiết bị nào đang hoạt động tại khu vực nào.

\paragraph{Phân hệ Người dùng và Phân quyền:}
Hệ thống sử dụng bảng \texttt{accounts} để quản lý người dùng, kết hợp với \texttt{permissions} và \texttt{user\_settings} để thực hiện cơ chế phân quyền RBAC (Role-Based Access Control), đảm bảo chỉ Admin hoặc chủ nông trại mới có quyền truy cập các dữ liệu nhạy cảm hoặc thực hiện cấu hình thiết bị.